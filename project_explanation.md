# Пояснительная записка к проекту "Лицейский портал"

## Общее описание проекта

"Лицейский портал" представляет собой веб-приложение для публикации и управления новостями, статьями и постами. Проект разработан с использованием фреймворка Flask на языке Python и предоставляет полноценную платформу для создания, редактирования и просмотра контента с возможностью комментирования и оценки материалов.

## Архитектура проекта

Проект построен по модульному принципу с использованием архитектуры MVC (Model-View-Controller):

- **Модели (Models)**: Определены в директории `data/` и представляют структуру базы данных.
- **Представления (Views)**: Реализованы через шаблоны Jinja2 в директории `templates/`.
- **Контроллеры (Controllers)**: Представлены маршрутами (routes) в директории `routes/`.

Основной файл приложения `app.py` инициализирует Flask-приложение, настраивает систему аутентификации и регистрирует все необходимые маршруты.

## Структура базы данных

### Основные модели:

1. **User** (`data/users.py`):
   - Хранит информацию о пользователях системы
   - Включает поля для аутентификации (имя пользователя, email, хешированный пароль)
   - Содержит метаданные (дата создания, последнего входа)
   - Определяет роли и статусы пользователей
   - Хранит дополнительную информацию профиля и настройки приватности

2. **Article** (`data/articles.py`):
   - Основная модель для хранения контента
   - Содержит заголовок, подзаголовок, основной текст, краткое содержание
   - Связана с автором, редакторами, категорией и комментариями
   - Включает метаданные (даты создания, обновления, публикации)
   - Имеет статус (черновик, опубликован, архивирован)
   - Поддерживает типы контента (статья, пост, новость)
   - Отслеживает количество просмотров и голоса

3. **Category** (`data/categories.py`):
   - Определяет категории для классификации статей
   - Содержит уникальный slug, название и описание

4. **Comment** (`data/comments.py`):
   - Хранит комментарии пользователей к статьям
   - Связана с автором и статьей
   - Включает систему голосования

5. **ArticleVote** и **CommentVote** (`data/article_votes.py`, `data/comment_votes.py`):
   - Реализуют систему голосования для статей и комментариев
   - Отслеживают голоса пользователей (положительные/отрицательные)

## Основные функциональные возможности

### Система аутентификации и авторизации

- Регистрация новых пользователей
- Вход в систему с использованием имени пользователя и пароля
- Различные роли пользователей (администратор, модератор, автор, пользователь)
- Статусы аккаунтов (активный, ожидающий проверки, заблокированный)

### Управление контентом

- Создание новых статей, постов и новостей
- Редактирование существующего контента
- Система черновиков и публикации
- Категоризация контента
- Поддержка тегов для улучшения поиска

### Взаимодействие пользователей

- Комментирование статей
- Система голосования для статей и комментариев (лайки/дизлайки)
- Просмотр профилей пользователей
- Отслеживание активности пользователей

### Интерфейс пользователя

- Адаптивный дизайн с использованием Bootstrap
- Главная страница с отображением последних опубликованных статей
- Навигация по категориям
- Детальный просмотр статей с поддержкой Markdown
- Система комментариев с возможностью голосования

## Маршруты приложения

### Основные маршруты (`main_routes.py`):
- `/` - Главная страница с отображением всех опубликованных статей

### Маршруты аутентификации (`auth_routes.py`):
- `/register` - Регистрация нового пользователя
- `/login` - Вход в систему
- `/logout` - Выход из системы

### Маршруты статей (`article_routes.py`):
- `/articles/create` - Создание новой статьи
- `/articles/edit/<id>` - Редактирование существующей статьи
- `/articles/view/<id>` - Просмотр статьи
- `/articles/<id>/comment` - Добавление комментария к статье
- `/articles/<id>/vote` - Голосование за статью

### Маршруты профиля (`profile_routes.py`):
- Просмотр и редактирование профиля пользователя
- Просмотр статей, созданных пользователем

### Маршруты комментариев (`comments_routes.py`):
- Управление комментариями
- Голосование за комментарии

## Особенности реализации

### Система шаблонов

Проект использует шаблонизатор Jinja2 для генерации HTML-страниц. Основной шаблон `base.html` содержит общую структуру страницы, включая навигационную панель и подвал. Другие шаблоны наследуются от него и определяют специфическое содержимое для различных страниц.

### Формы

Для обработки пользовательского ввода используется Flask-WTF. Определены формы для:
- Регистрации и входа в систему
- Создания и редактирования статей

### Система оценки популярности

Реализована функция `hotness()`, которая рассчитывает "горячесть" статьи на основе количества просмотров и времени, прошедшего с момента публикации. Это позволяет выделять популярные статьи на главной странице.

### Поддержка Markdown

Для статей реализована поддержка форматирования Markdown, что позволяет авторам использовать разметку для создания структурированного контента с заголовками, списками, ссылками и т.д.

## Планы по развитию (TODO)

В коде присутствуют комментарии TODO, указывающие на планируемые улучшения:

1. Реализация счетчика просмотров для статей
2. Добавление функции восстановления пароля
3. Реализация маршрута для удаления статей
4. Добавление форм для удаления статей, комментариев
5. Улучшение дизайна и поддержка двух тем оформления
6. Добавление дополнительных административных функций

## Заключение

"Лицейский портал" представляет собой полноценную платформу для публикации и управления контентом с широкими возможностями для взаимодействия пользователей. Проект имеет модульную структуру, что облегчает его поддержку и расширение. Использование современных технологий и фреймворков обеспечивает надежность и эффективность работы приложения.
